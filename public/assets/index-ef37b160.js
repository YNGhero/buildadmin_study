import{b,T as g,a as h}from"./index-30b244da.js";import{E as _,D as k}from"./common-60f70958.js";import{b as y}from"./controllerUrls-941681c3.js";import x from"./popupForm-afc9c6ac.js";import{d as T}from"./index-20feb690.js";import{a as v}from"./index-363faea7.js";import{d as f,X as p,an as w,o as C,a as c,t as I,u as n,c as D,M as A,e as i,r as G,al as q}from"./vue-a70dbbf9.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./random-1d7fa280.js";import"./iconfont-0e6ed700.js";import"./index-05f0e37d.js";import"./index-06cda30d.js";import"./validate-44e9fa1e.js";const B={class:"default-main ba-table-box"},N=f({name:"auth/group"}),z=f({...N,setup(R){const s=p(),u=p(),{t:a}=v(),e=new b(new _(y),{expandAll:!0,dblClickNotEditColumn:[void 0],column:[{type:"selection",align:"center"},{label:a("auth.group.Group name"),prop:"name",align:"left",width:"200"},{label:a("auth.group.jurisdiction"),prop:"rules",align:"center"},{label:a("state"),prop:"status",align:"center",render:"tag",custom:{0:"danger",1:"success"},replaceValue:{0:a("Disable"),1:a("Enable")}},{label:a("updatetime"),prop:"updatetime",align:"center",width:"160",render:"datetime"},{label:a("createtime"),prop:"createtime",align:"center",width:"160",render:"datetime"},{label:a("operate"),align:"center",width:"130",render:"buttons",buttons:T(["edit","delete"])}]},{defaultItems:{status:"1"}},{onSubmit:({formEl:r,items:t})=>{var t=w(t);t.rules=s.value.getCheckeds();for(const o in t)t[o]===null&&delete t[o];let l=()=>{e.form.submitLoading=!0,e.api.postData(e.form.operate,t).then(o=>{var m;e.onTableHeaderAction("refresh",{}),e.form.submitLoading=!1,(m=e.form.operateIds)==null||m.shift(),e.form.operateIds.length>0?e.toggleForm("edit",e.form.operateIds):e.toggleForm(),e.runAfter("onSubmit",{res:o})}).catch(()=>{e.form.submitLoading=!1})};return r?(e.form.ref=r,r.validate(o=>{o&&l()})):l(),!1},onTableDblclick:({row:r})=>e.table.extend.adminGroup.indexOf(r.id)===-1},{getIndex:({res:r})=>{e.table.extend.adminGroup=r.data.group;let d=k(e.table.column,"render","buttons");e.table.column[d].buttons.forEach(t=>{t.display=l=>r.data.group.indexOf(l.id)===-1})}});return q("baTable",e),C(()=>{e.table.ref=u.value,e.mount(),e.getIndex()}),(r,d)=>{const t=G("el-alert");return c(),I("div",B,[n(e).table.remark?(c(),D(t,{key:0,class:"ba-table-alert",title:n(e).table.remark,type:"info","show-icon":""},null,8,["title"])):A("",!0),i(g,{buttons:["refresh","add","edit","delete","unfold","quickSearch","columnDisplay"],"quick-search-placeholder":n(a)("quick Search Placeholder",{fields:n(a)("auth.group.GroupName")})},null,8,["quick-search-placeholder"]),i(h,{ref_key:"tableRef",ref:u,pagination:!1},null,512),i(x,{ref_key:"formRef",ref:s},null,512)])}}});export{z as default};
